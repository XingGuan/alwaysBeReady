### `CSS`选择器(`Selector`)与优先级(`Specificity`)  
#### `CSS`选择器(`Selector`)  
选择器是用于"选择"或"定位"你希望样式化的`HTML`元素的模式。   
1.基础选择器   
+ 元素选择器(`Type Selector`)  
    + 根据`HTML`标签名称选择元素。  
    + 示例：`p {color:blue;}` 选择所有`<p>`元素。   
+ 类选择器(`Class Selector`)  
    + 选择带有特定`class`属性的元素。一个元素可以有多个类。 
    + 语法：一个点（.）后面跟类名。  
    + 示例：`.highlight {background-color:yellow;}`选择所有`class=highlight`的元素。   
+ `ID`选择器(`ID Selector`)  
    + 选择带有特定`id`属性的元素。在一个页面中，`id`应该是唯一的。   
    + 语法:一个`hash`符号{`#`}后面跟`id`名。  
    + 示例：`#header {height:100px;}` 选择 `id=header`的元素。   
+ 通用选择器(`Universal Selector`)   
    + 选择所有元素。  
    + 语法：星号（`*`）。   
    + 示例：`*{margin:0;padding:0;}`(常用于重置边距和填充)。   
2.组合器(`Combinators`)  
组合器用于解释选择器之间的关系。   
+ 后代组合器（`Descendant Combinator`）(空格)
    + 选择第一个元素的**所有后代**元素（不仅是直接子元素，而是所有层级）。  
    + 示例：`div p`选择所有在`<div>`元素内部的`<p>`元素。   
+ 子组合器（`Child Combinator`）(`>`)  
    + 选择作为第一个元素的直接子元素。
    + 示例：`ul > li` 只选择所有作为`<ul>`直接子元素的`<li>`元素。
+ 相邻兄弟组合器（`Adjacent Sibling Combinator`）(`+`)  
    + 选择紧接在第一个元素之后的下一个兄弟元素。  
    + 示例：`h2 + p` 所有紧跟在`<h2>`后面的第一个`<p>`元素。   
+ 通用兄弟组合器（`General Sibling Combinator`）(`~`)  
    + 选择第一个元素之后的**所有**兄弟元素。 
    + 示例：`h2 ~ p` 选择所有跟`<h2>`同级的并且跟在它之后的`<p>`元素。   
3.属性选择器（`Attribute Selectors`）  
根据元素的属性或属性值来选择元素。   
    + `[attr]`:选择带有`attr`属性的元素。
    + 示例：`a[target]`选择所有带有`target`属性的`<a>`元素。  
    + `[attr=value]`:选择`attr`属性等于`value`的元素。  
        + 示例:`a[target="_blank"]`  
    + `[attr~=value]`：选择`attr`属性值包含单词`value`的元素。
    + `[attr|=value]`: 选择`attr`属性值以`value`开头的元素。  
    + `[attr^=value]`: 选择`attr`属性值以`value`开头的元素。  
        + 示例：`a[href^="https"]`   
    + `[attr$=value]`：选择`attr`属性值以`value`结尾的元素。  
        + 示例：`a[href$=".pdf"]`
    + `[attr*=value]`：选择`attr`属性值中包含`value`子串的元素。  
        + 示例：`a[href*="example"]`      
  
4.伪类和伪元素  
    + 伪类（`Pseudo-classes`）  
        + 用于选择用于特定状态的元素。 
        + 语法：单冒号（`：`）。  
        + 常见例子：  
            + `:hover`-鼠标悬停时的状态。
            + `:active`-元素被激活（如点击）时的状态。  
            + `:focus`-获得焦点时的状态（如表单输入框）。  
            + `:nth-child(n)` - 根据位置选择兄弟元素。
            + `:first-child`,`:last-child`  
            + `:not(selector)`- 否定伪类，选择不匹配内部选择器的元素。   
    + 伪元素（`Pseudo-elements`）
        + 用于样式化元素的特定部分。
        + 语法：双冒号（`::`）(`CSS3`规范，但单冒号`:`也可用于向后兼容)。  
        + 常见例子：  
            + `::before`-在元素之前插入内容。
            + `::after`-在元素之后插入内容。
            + `::first-line`-选择元素的第一行文本。
            + `::first-letter`-选择元素的第一个字母。
            + `::selection`- 选择用户选中的文本部分。   
#### 优先级（`Specificity`）  
当多条规矩作用于同一元素时，浏览器需要决定应用那条规则。优先级就是决定哪条`CSS`规则生效的算法。   
1.优先级计算规则  
优先级由选择器本身的组成部分决定，通常表示为一个四元组：（`a,b,c,d`）。   
+ `a`(千位)：如果样式声明在`<style>`属性中（内联样式），则`a=1`,否则`a=0`。   
+ `b`(百位)：计算选择器中`ID`选择器的数量。  
+ `c`(十位)：计算选择器中类选择器、属性选择器和伪类的数量。  
+ `d`(个位)：计算选择器中元素选择器和伪元素数量。   

> 注意：通用选择器（`*`）、组合器（`+,>,~`）和否定伪类`:not()`本身不增加优先级，但`:not()`内部的参数会参与计算。   

|选择器|a(内联)|b(ID)|c(类/属性/伪类)|d(元素/伪元素)|优先级值|  
|`style="……"`|1|0|0|0|1000|  
|`#header`|0|1|0|0|0100|  
|`.nav li.active`|0|0|2|1|0021|  
|`ul#main-nav > li`|0|1|0|2|0102|  
|`h1`|0|0|0|1|0001|  
|*|0|0|0|0|0000|  
2.比较规则   
比较时，从`a`到`d`逐位比较，数字大的优先级高，一旦某一位胜出，后续位不再比较。   

+ (1, 0, 0, 0) > (0, 2, 0, 0) (内联样式胜出)
+ (0, 1, 0, 0) > (0, 0, 2, 0) (ID 胜出)
+ (0, 0, 2, 0) > (0, 0, 1, 0) (类数量多的胜出)
+ (0, 0, 1, 3) > (0, 0, 1, 2) (类数相同，元素数量多的胜出)
3.重要规则(`!important`)
`!important` 规则会打破正常的优先级计算。  
+ 用法：在声明样式后面加上`!important`。  
  + 示例：`p{color:red !important;}`  
+ 效果：带有`!important`的声明拥有最高的优先级。但强烈建议避免使用，因为它使得调试和维护变得非常困难，打破了`CSS`固有的级联规则。只有在覆盖第三方库的内联样式等极端情况下才考虑使用。   
4.继承(`Inheritance`)和源顺序(`Source Order`)  
+ 继承：某些属性（如`color`,`font-family`）会从父元素继承。继承的样式没有优先级，甚至低于通用选择器`*`。  
+ 源顺序：当优先级完全相同时，最后声明的样式会生效。   

### 总结与最佳实践   
1.优先使用类选择器：它们复用性好，优先级适中，易于覆盖。
2.尽量避免使用 ID 选择器：它的优先级过高，难以覆盖，通常用类选择器替代。  
3.尽量避免使用内联样式和 !important：它们会严重破坏样式表的可维护性。
4.保持低优先级：让你的选择器尽可能简单且特异性低，这样当需要覆盖时更容易。
5.如果需要覆盖高优先级规则：可以复制选择器以提高其特异性（如 .nav.nav），或者更合理地重构代码。!important 应是最后的手段。



