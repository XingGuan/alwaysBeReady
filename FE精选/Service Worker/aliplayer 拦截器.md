### `aliplayer`直播流添加自定义请求头方案整理
#### 方案一：直接在`aliplayer`播放器上添加自定义请求头
现状：现`aliplayer`播放器不支持直接添加自定义请求头。
#### 方案二：通过JS请求层添加`xhr`及`fetch`拦截器
问题：测试发现`aliplayer`会优先通过`media`发起简单请求，此时`xhr`及`fetch`拦截器无法拦截到，导致`media`发起的请求返回403。
#### 方案三：通过`Service Worker`浏览器引擎层添加拦截器
问题：

`media`类型的请求默认都是简单请求，会忽略添加的请求头，导致部分media发起的请求返回403。

`Service Worker`有兼容性问题，在微信浏览器环境下（微信内置浏览器的X5内核),在部分浏览器中支持度差，会有长时间`loading`的或无法正常加载的情况，需要写回退逻辑。

> `aliplayer`播放器有请求优化机制，假如在`meida`发起的请求是可以的返回的是200，那么后续资源请求也会使用media发起请求，导致后续 header无法添加成功。    
> 自定义请求头性能问题，添加自定义请求头后，会变成复杂请求，需要先发送一个`options`预检请求，导致请求数量增多，在IOS及一些要求流畅度较高环境下，会导致loading时间长。  

#### 方案四：通过生成验证参数拼接值请求流后边
优点：无兼容性问题，改动较小。

### 关键问题说明  
> aliplayer请求优化机制：假如在media发起的请求返回200，那么后续资源请求也会使用media发起请求，导致后续header无法添加成功。

>自定义请求头性能问题：添加自定义请求头后，会变成复杂请求，需要先发送一个options预检请求，导致请求数量增多，在IOS及一些要求流畅度较高的环境下，会导致loading时间延长。
