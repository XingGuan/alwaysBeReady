### 【异步处理】`setState`的异步开发

#### 【思考】 `setState`是异步的还是同步的？  
> 异步更新，同步执行。   

+ `setState`本身并不是异步的，但对`state`的处理机制给人一种异步的假象。`state`处理一般发生在生命周期变化的时候。  

> 这个问题涉及到`React`的更新机制，关键在于调用时机的不同。  
  
```javascript  
 onClick={() => {
    this.setState({ count: this.state.count + 1 }, () => {
        console.log("count", this.state.count);
    });
    this.setState({ count: this.state.count + 1 }, () => {
        console.log("count", this.state.count);
    });
}}
// 连续赋值两次  
```

```javascript
// 这里 count 会加1，不会加两次
this.setState(
    (preState, preProps) => {
        //指的前一个生命周期的状态
        return { count: preState.count + 1 };
    },
    () => {
        console.log("count", this.state.count);
    });
// 这里 count 会加2    
this.setState(
    (preState, preProps) => {
    //指的前一个生命周期的状态
        return { count: preState.count + 1 };
    },
    () => {
        console.log("count", this.state.count);
    }
);
```






